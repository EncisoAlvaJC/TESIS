plot(n,z,type='l')
pnorm(0)
pnorm(3.55)
qnorm(3.55)
rnorm(3.55)
.45*200
1/8
3/8
choose(20,2)
0.1**2
choose(20,2)*((0.1)**2)*(0.9**18)
(.05*.5)/(.05*.5+.1*.2+.075*.2+.3*.1)
(.1*.2)/(.05*.5+.1*.2+.075*.2+.3*.1)
(.075*.2)/(.05*.5+.1*.2+.075*.2+.3*.1)
(.3*.1)/(.05*.5+.1*.2+.075*.2+.3*.1)
0.27+.22+.16+.33
0.277+.222+.166+.333
frecuenciasss = c(200,
512,512,
200,
200,#segun valeria GUR=200 Hz
#512, #segun la libreta GURM=512
512,512,
200,#solo tiene 3 horas
512,
512,512,
200)
source('C:/Users/EQUIPO 1/Desktop/julio/scripts/espectro_v_movil_ejecutable03.R')
install.packages("beepr")
install.packages(c("curl", "devtools", "igraph", "XML"))
source('C:/Users/EQUIPO 1/Desktop/julio/scripts/espectro_v_movil_ejecutable03.R')
set.seed(2017)
X = rnorm(512*30)
for(i in 2:(512*15)){
X[i] = (X[i] + X[i-1])/2
}
plot(X,type='l')
f.muestreo = 512
d.t = 1/f.muestreo
TT  = length(X)
J    = floor((limites[2]-limites[1])/d.om)
limites=c(0.5,3.5),nombre='Delta',
limites=c(0.5,3.5),nombre='Delta'
limites=c(0.5,3.5)
nombre='Delta'
ventana.g='Bartlett-Priestley'
truncar.g=F
ventana.w='Bartlett-Priestley'
truncar.w=F
th.g=0.5
th.w=0.25
J    = floor((limites[2]-limites[1])/d.om)
d.om=1/100
J    = floor((limites[2]-limites[1])/d.om)
d.om = (limites[2]-limites[1])/d.om
I    = n.block
n.block=ceiling(log2(length(X)))
I    = n.block
T.m  = floor(T/I)
T.m  = floor(TT/I)
tiempos     = ((T.m-1)/2 + (0:(I-1))*T.m)*d.t
plot((1:TT)*dt,X,type='l')
plot((1:length(X))*dt,X,type='l')
plot((1:length(X))*d.t,X,type='l')
tiempos
UU = matrix(nrow=I,  ncol=J)
FF = matrix(nrow=T.m,ncol=J)
UU = matrix(nrow=T.m,ncol=J)
FF = matrix(nrow=I  ,ncol=J)
u  = (1:T.m) - (T.m+1)/2
g.vec = g((-T.m+1):(T.m-1))
source('C:/Users/EQUIPO 1/Desktop/julio/scripts/ventana_BartlettPriestley.R')
install.packages("fourierin")
source('C:/Users/EQUIPO 1/Desktop/julio/scripts/ventana_BartlettPriestley.R')
f = seq(1:50,by=0.4)
f = seq(1,50,by=0.4)
maxi = max(f[f<3.5])
maxi
install.packages(c("curl", "dplyr", "gridExtra", "igraph", "mgcv", "openssl", "psych", "rlang", "rstudioapi", "XML"))
install.packages("xlsx")
install.packages("animation")
install.packages("magick")
fecuencia[1]
grupo_de = c(0,0,0,0,0,1,1,1,1,-1,-1,-1)
frecuenciasss = c(200,
512,512,
200,
200,#segun valeria GUR=200 Hz
#512, #segun la libreta GURM=512
512,512,
200,#solo tiene 3 horas
512,
512,512,
200)
frecuenciasss[1]
frecuenciasss[2]
nom_facil = c('VCR',
'MJH',
'JAE',
'GHA',
'MFGR',
'CLO',
'RLO',
'RRU',
'JGZ',
'FGH',
'MGG',
'EMT')
frecuenciasss[3]
frecuenciasss[4]
frecuenciasss[5]
frecuenciasss[6]
frecuenciasss[7]
frecuenciasss[8]
frecuenciasss[9]
frecuenciasss[10]
frecuenciasss[11]
frecuenciasss[12]
nom_facil[1]
nom_facil[2]; frecuenciasss[2]
i = 3; nom_facil[i]; frecuenciasss[i]
i = 4; nom_facil[i]; frecuenciasss[i]
i = 5; nom_facil[i]; frecuenciasss[i]
i = 6; nom_facil[i]; frecuenciasss[i]
i = 7; nom_facil[i]; frecuenciasss[i]
i = 8; nom_facil[i]; frecuenciasss[i]
i = 9; nom_facil[i]; frecuenciasss[i]
i = 10; nom_facil[i]; frecuenciasss[i]
i = 11; nom_facil[i]; frecuenciasss[i]
i = 12; nom_facil[i]; frecuenciasss[i]
require(xlsx)
install.packages("xlsx")
require(xlsx)
Sys.setenv(JAVA_HOME="C:\\Program Files\\Java\\jre7\\")
options(java.home="C:\\Program Files\\Java\\jre7\\")
install.packages("rJava")
options(java.home="C:/Program Files/Java/jdk1.8.0_65/jre/bin/server")
install.packages("rJava")
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jdk1.8.0_65/bin")
install.packages("rJava")
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jdk1.8.0_65")
install.packages("rJava")
require(xlsx)
require(rJava)
install.packages("rJava")
require(rJava)
require(xlsx)
install.packages('rJava')
this$Runtimelib
this
JAVA_HOME
Sys.setenv(JAVA_HOME='C:\\Program Files\\Java\\jdk1.8.0_65')
install.packages('rJava')
require(rJava)
require(xlsx)
v.nombres    = c('VCNNS1',
'MJNNVIGILOS',
'JANASUE',
'GH24031950SUEÑO',
'GURM251148SUE',
'CLMN10SUE',
'RLMN10SUE',
'RRMNS',
'JGMN6SUE',
'FGHSUE',
'MGNA5SUE',
'EMNNS')
library(readxl)
info <- read_excel("C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa/info.xlsx")
View(info)
info$Etiqueta
v.etiqueta   = c('VCR',
'MJH',
'JAE',
'GHA',
'MFGR',
'CLO',
'RLO',
'RRU',
'JGZ',
'FGH',
'MGG',
'EMT')
v.etiqueta
t(v.etiqueta)
view(t(v.etiqueta))
View(t(v.etiqueta))
View((v.etiqueta))
v.nombres    = c('VCNNS1',
'MJNNVIGILOS',
'JANASUE',
'GH24031950SUEÑO',
'GURM251148SUE',
'CLMN10SUE',
'RLMN10SUE',
'RRMNS',
'JGMN6SUE',
'FGHSUE',
'MGNA5SUE',
'EMNNS')
View((v.nombres))
v.directorio = c('VCNNS',
'MJNNVIGILOScCanal',
'JANASUE_revisado',
'GH',
'GURM_revisado',
'CLMN10SUE',
'RLMN',
'RRMNS_2',
'JGMN6SUE',
'FGH_EEGdescompuesto',
'MGNA',
'EMNN')
View((v.directorio))
frecuenciasss = c(200,
512,512,
200,
200,#segun valeria GUR=200 Hz
#512, #segun la libreta GURM=512
512,512,
200,#solo tiene 3 horas
512,
512,512,
200)
View((frecuenciasss))
grupo_de = c(0,0,0,0,0,1,1,1,1,-1,-1,-1)
View((grupo_de))
h_ini = c( 1, 1, 0, 3, 2, 1, 1, 1, 3, 2, 1, 1)
m_ini = c(55,28,51,14,13,19,57,53, 0,14,55,37)
s_ini = c( 0, 0, 0, 0,30,30,30, 0,30,30,30,30)
View(rbind(h_ini,m_ini,s_ini))
View(t(rbind(h_ini,m_ini,s_ini)))
h_fin = c( 2, 1, 1, 3, 2, 1, 2, 2, 3, 2, 2, 1)
m_fin = c( 5,38, 1,24,23,29, 7, 3,10,24, 5,47)
s_fin = c( 0, 0, 0, 0,30,30,30, 0,30,30,30,30)
View(t(rbind(h_fin,m_fin,s_fin)))
library(readxl)
info <- read_excel("C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa/info.xlsx")
View(info)
info = read_excel(paste0(dir_info,'/info.xlsx'))
dir_gral    = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
dir_info    = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
dir_scripts = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
dir_res_pre = 'C:/Users/EQUIPO 1/Desktop/julio/espectro_integrado_171018'
dir_epocas  = 'C:/Users/EQUIPO 1/Desktop/julio/epocas_dfa'
dir_graf    = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
info = read_excel(paste0(dir_info,'/info.xlsx'))
grabar      = FALSE
no_relativo = TRUE
dir_gral    = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
dir_info    = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
dir_scripts = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
dir_res_pre = 'C:/Users/EQUIPO 1/Desktop/julio/espectro_integrado_171018'
dir_epocas  = 'C:/Users/EQUIPO 1/Desktop/julio/epocas_dfa'
dir_graf    = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
info = read_excel(paste0(dir_info,'/info.xlsx'))
View(info)
source(paste0(dir_scripts,'/utileria.R'))
banda.n = c('Delta','Theta','Alfa','Beta','Gamma','Potencia total')
banda   = c('DELTA','THETA','ALFA','BETA','GAMMA','TOTAL')
View(banda.n)
View(banda)
bandas = read_excel(paste0(dir_info,'/info_bandas.xlsx'))
n.bandas = length(bandas$Banda)
canales = c('C3','C4','CZ','F3','F4','F7','F8','FP1','FP2','FZ','O1','O2',
'P3','P4','PZ','T3','T4','T5','T6')
View(canales)
canales = c('C3','C4','CZ','F3','F4','F7','F8','FP1','FP2','FZ','O1','O2',
'P3','P4','PZ','T3','T4','T5','T6','LOG','ROG')
View(canales)
canales = c('C3','C4','CZ','F3','F4','F7','F8','FP1','FP2','FZ','O1','O2',
'P3','P4','PZ','T3','T4','T5','T6','LOG','ROG','EMG')
k = canales
View(k)
dur_chunk   = 1
stam         = T
orden_stam  = c(9,8,7,6,5,4,17,16,2,1,19,18,14,13,12,11,10,3,15,20,21,22)
orden_stam  = c(9,8,7,6,5,4,17,16,2,1,19,18,14,13,12,11,10,3,15,20,21,22)
canales = canales[orden_stam]
canales = c('C3','C4','CZ','F3','F4','F7','F8','FP1','FP2','FZ','O1','O2',
'P3','P4','PZ','T3','T4','T5','T6','LOG','ROG','EMG')
orden_stam  = c(9,8,7,6,5,4,17,16,2,1,19,18,14,13,12,11,10,3,15,20,21,22)
canales = canales[orden_stam]
view(canales)
View(canales)
canales  = read_excel(paste0(dir_info,'/info_canales.xlsx'))
require(readxl)
require(xlsx)
Sys.setenv(JAVA_HOME='C:\\Program Files\\Java\\jdk1.8.0_65')
require(readxl)
require(xlsx)
sujeto = 2
grabar      = FALSE
no_relativo = TRUE
orden_stam  = T
dur.chunk   = 1
zoom           = F
unidad_par_t   = 'tiempo'
dir_gral    = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
dir_info    = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
dir_scripts = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
dir_res_pre = 'C:/Users/EQUIPO 1/Desktop/julio/espectro_integrado_171018'
dir_epocas  = 'C:/Users/EQUIPO 1/Desktop/julio/epocas_dfa'
dir_graf    = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
Sys.setenv(JAVA_HOME='C:\\Program Files\\Java\\jdk1.8.0_65')
require(readxl)
require(xlsx)
source(paste0(dir_scripts,'/utileria.R'))
info     = read_excel(paste0(dir_info,'/info_participantes.xlsx'))
bandas   = read_excel(paste0(dir_info,'/info_bandas.xlsx'))
n.bandas = length(bandas$Banda)
canales  = read_excel(paste0(dir_info,'/info_canales.xlsx'))
if(orden_stam){
canales  = read_excel(paste0(dir_info,'/info_canales_alterno.xlsx'))
}
n.canales = length(canales$Etiqueta)
nombre      = info$Nombre_archivo[sujeto]
etiqueta    = info$Etiqueta[sujeto]
fr_muestreo = info$Fr_muestreo[sujeto]
ajuste_ini_hms = c(info$ini_hh[sujeto],info$ini_mm[sujeto],info$ini_ss[sujeto])
min_hms        = c(info$ini_hh[sujeto],info$ini_mm[sujeto],info$ini_ss[sujeto])
max_hms        = c(info$fin_hh[sujeto],info$fin_mm[sujeto],info$fin_ss[sujeto])
grupo = info$Grupo_n[sujeto]
if(grupo== 0){grupo = 'CTL'}
if(grupo== 1){grupo = 'PDC'}
if(grupo==-1){grupo = 'EX'}
if(zoom){
validar.zoom = F
if(unidad_par_t=='tiempo'){
s.ini = hms2t(min_hms)
s.fin = hms2t(max_hms)
e.ini = s.ini/dur.chunk + 1
e.fin = s.fin/dur.chunk
n.epo = e.fin - e.ini
validar.zoom = T
}
if(unidad_par_t=='epocas'){
# agregar posteriormente
}
}
n.epo
zoom = T
if(zoom){
validar.zoom = F
if(unidad_par_t=='tiempo'){
s.ini = hms2t(min_hms)
s.fin = hms2t(max_hms)
e.ini = s.ini/dur.chunk + 1
e.fin = s.fin/dur.chunk
n.epo = e.fin - e.ini
validar.zoom = T
}
if(unidad_par_t=='epocas'){
# agregar posteriormente
}
}
validar.zoom = F
s.ini = hms2t(min_hms)
min_hms
s.ini = hms2t(min_hms)
s.ini = hms2t(min_hms)[1]
min_hms[1]
min_hms[2]
t2hms = function(tt){
hh = floor(tt/(60**2))
mm = floor((tt-hh*60*60)/60)
ss = tt -hh*60*60 -mm*60
return(c(hh,mm,ss))
}
hms2t = function(hms){
return(sum(hms*c(60**2,60,1)))
}
s.ini = hms2t(min_hms)
s.fin = hms2t(max_hms)
e.ini = s.ini/dur.chunk + 1
e.fin = s.fin/dur.chunk
n.epo = e.fin - e.ini
s.ini = hms2t(min_hms)
s.fin = hms2t(max_hms)
e.ini = s.ini/30 + 1
e.fin = s.fin/30
n.epo = e.fin - e.ini
e.ini = s.ini/30
e.fin = s.fin/30
e.ini = s.ini/30+1
e.ini = s.ini/30+1
e.fin = s.fin/30+1
n.epo = e.fin - e.ini
validar.zoom = T
if(unidad_par_t=='tiempo'){
s.ini = hms2t(min_hms)
s.fin = hms2t(max_hms)
e.ini = s.ini/30+1
e.fin = s.fin/30+1
n.epo = e.fin - e.ini
validar.zoom = T
}
if(unidad_par_t=='epocas'){
# agregar posteriormente
}
if(zoom){
validar.zoom = F
if(unidad_par_t=='tiempo'){
s.ini = hms2t(min_hms)
s.fin = hms2t(max_hms)
e.ini = s.ini/30+1
e.fin = s.fin/30+1
n.epo = e.fin - e.ini
validar.zoom = T
}
if(unidad_par_t=='epocas'){
# agregar posteriormente
}
}
archivo.epocas = paste0(dir_epocas,'/epocas_mor_',nombre,'.txt')
indice.epocas  = scan(arch_indice_e)
indice.epocas  = scan(archivo.epocas)
archivo.epocas = paste0(dir_epocas,'/epocas_',nombre,'.txt')
indice.epocas  = scan(archivo.epocas)
factor.extra = 1
indice.epocas
sujeto = 1
grabar         = FALSE
potencia.total = TRUE
orden_stam     = TRUE
dur.chunk   = 1
zoom           = T
unidad_par_t   = 'tiempo'
dir_gral    = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
dir_info    = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
dir_scripts = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa'
dir_res_pre = 'C:/Users/EQUIPO 1/Desktop/julio/espectro_integrado_171018'
dir_epocas  = 'C:/Users/EQUIPO 1/Desktop/julio/epocas_dfa'
dir_graf    = 'C:/Users/EQUIPO 1/Desktop/julio/TESIS/articulo_dfa/espectro'
Sys.setenv(JAVA_HOME='C:\\Program Files\\Java\\jdk1.8.0_65')
require(readxl)
require(xlsx)
source(paste0(dir_scripts,'/utileria.R'))
info     = read_excel(paste0(dir_info,'/info_participantes.xlsx'))
bandas   = read_excel(paste0(dir_info,'/info_bandas.xlsx'))
n.bandas = length(bandas$Banda)
canales  = read_excel(paste0(dir_info,'/info_canales.xlsx'))
if(orden_stam){
canales  = read_excel(paste0(dir_info,'/info_canales_alterno.xlsx'))
}
n.canales = length(canales$Etiqueta)
nombre      = info$Nombre_archivo[sujeto]
etiqueta    = info$Etiqueta[sujeto]
fr_muestreo = info$Fr_muestreo[sujeto]
ajuste_ini_hms = c(info$ini_hh[sujeto],info$ini_mm[sujeto],info$ini_ss[sujeto])
min_hms        = c(info$ini_hh[sujeto],info$ini_mm[sujeto],info$ini_ss[sujeto])
max_hms        = c(info$fin_hh[sujeto],info$fin_mm[sujeto],info$fin_ss[sujeto])
grupo = info$Grupo_n[sujeto]
if(grupo== 0){grupo = 'CTL'}
if(grupo== 1){grupo = 'PDC'}
if(grupo==-1){grupo = 'EX'}
if(zoom){
validar.zoom = F
if(unidad_par_t=='tiempo'){
s.ini = hms2t(min_hms)
s.fin = hms2t(max_hms)
e.ini = s.ini/30+1
e.fin = s.fin/30+1
n.epo = e.fin - e.ini
validar.zoom = T
}
if(unidad_par_t=='epocas'){
# agregar posteriormente
}
}
archivo.epocas = paste0(dir_epocas,'/epocas_',nombre,'.txt')
indice.epocas  = scan(archivo.epocas)
factor.extra = 1
if(fr_muestreo==200){
factor.extra = 3
}
indice.chunk   = indice.epocas*30/factor.extra - s.ini #epoca->segundos
indice.chunk   = indice.chunk/dur.chunk               #segundos->chunks
indice.chunk.t = c()
for(k in 1:(30/factor.extra)){
indice.chunk.t = c(indice.chunk.t,indice.chunk+k)
}
indice.chunk = sort(unique(indice.chunk.t))
tag = rbind(c('Participante',etiqueta),
c('Etiqueta',nombre),
c('Estado',info$Estado[sujeto]),
c('Fr. muestreo',fr_muestreo),
c('Dur. epoca',30/factor.extra))
gral           = matrix(ncol=4,nrow=length(indice.epocas))
colnames(gral) = c('MOR [#]','Epoca [#]','Inicio [hhmmss]','Fin [hhmmss]')
for(i in 1:length(indice.epocas)){
hhmmss1  = t2hms((indice.epocas[i]-1)*30/factor.extra)
hhmmss2  = corregir.hms(hhmmss1+c(0,0,30/factor.extra))
gral[i,] = c(i,indice.epocas[i],hms2txt(hhmmss1),hms2txt(hhmmss2))
}
if(potencia.total){
agregado = 'total'
}else{
agregado = 'relativo'
}
setwd(dir_res_pre)
ch        = 19
ch.actual = canales$Nombre_archivo[ch]
n.archivo = paste0('SP_INT_',nombre,'_',ch.actual,'_TOTAL.txt')
datos     = scan(n.archivo)
n.chunks  = length(datos)
indice.chunk = indice.chunk[indice.chunk<=n.chunks]
banda.actual = 1
setwd(dir_graf)
archivo.excel = paste0(nombre,'_',bandas$Nombre_archivo[banda.actual],
'_',agregado,'.xlsx')
wb            = createWorkbook()
